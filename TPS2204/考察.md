# 2204

## EDA

### subject

* 被験者(subject)別に、何度か実験(sequence)を繰り返し、13個のセンサー(sensor)別の60個の時系列データ(step)を得た
* subject一人当たり、2回~199回のsequenceを行っている
* sequenceが多いsubjectほど、状態(state)が1になる確率が高い
* 同じsubjectは互いに連動するので、訓練データとテストデータ両方に同じsubjectが混ざらないよう、データを分割する必要がある。

### sensor

* sensorははずれ値を持つ。上下2%区間を除いたもので分析したほうが良いだろう
* ただし、sensor12はロングテールであり、特殊。順位等を用いて正規化することも検討

### 時系列データ

* sensor02以外の12個のsensorは、高周波数のデータであり、サンプリング間隔が広すぎて波形として見れない。したがって、FFT等による周波数の分析は役に立たないと思われる。
* 振れ幅は、時間が経つほど小さくなる傾向にあるが、終了直前に急変するケースがある
* 振れ幅の変化を評価することが重要かと思われる。
* sensor02は波形データではないので、異なる取り扱いをする
* センサーが（おそらく異常で）止まってしまう場合、0を返している。結構なケースで0を返しているケースがある。0でスタックしている場合は、0以外の異なる値に変更するべきかもしれない。

### データの重複

* ほとんどないので無視してよい

### EEAI

* https://www.kaggle.com/code/abdulravoofshaik/early-eda-and-insights
* 1) いくつかのセンサデータは互いに非常によく似ているようだ。これは、相関法や主成分分析（PCA）により入力センサを減らすとうまくいくかもしれないことを意味する。
* 2) 経験則では、特徴選択には単純なアルゴリズム（KNNやmeanregressorなど）を用い、冗長な特徴を選択しないようにする必要がある。
*  Sensor_05とSensor_10は、他のセンサーと比較して、レンジ（最大値と最小値）が非常に小さくなっています。スケーリングは良い方法かもしれません。
* 平均や分散などの統計的特徴が大きな役割を果たしている。

### PCA

* 主因子分析や相関係数は、欠損値があると役に立たない
* 欠損値を補完した後に実施すること

## 個人考察

* 振れ幅の変化等を特徴量として持たせたい
* 振れ幅が異常になって止まったケースを判定させたい
* 何度も出ている被験者については、何番目に良いデータなのかを持たせたい
* データを主因子分析やKNN等を使って削ったほうが良いらしいけど、よくわからない
* Sensor_05とSensor_10をスケーリングする。つまり、値の取る幅が小さすぎるので、拡大する
* センサーの値は、同期していないかもしれない、つまり、周期のズレがあって相関が低く出ているだけで、実態はほぼ同じ挙動をしているセンサーがいくつかあるかもしれない
* センサーの劣化等により、時間の経過とともに真の値とデータとの間に乖離が生じるかもしれない。また、ノイズが含まれているかもしれない
* 0の出現回数はいい方法かもしれない
* FFTもやっぱありかもしれない（時系列データのクラスタリングが難しそうなので、FFTでがんばる
* https://www.kaggle.com/code/matanivanov/lgbm-with-fourier-transform